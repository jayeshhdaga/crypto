{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Drawer from\"@material-ui/core/Drawer\";import{Avatar,Button}from\"@material-ui/core\";import{CryptoState}from\"../../CryptoContext\";import{signOut}from\"firebase/auth\";import{auth,db}from\"../../firebase\";import{AiFillDelete}from\"react-icons/ai\";import{doc,setDoc}from\"firebase/firestore\";import{numberWithCommas}from\"../CoinTable\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles({container:{width:350,padding:25,height:\"100%\",display:\"flex\",flexDirection:\"column\",fontFamily:\"monospace\"},profile:{flex:1,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:\"20px\",height:\"92%\"},logout:{height:\"8%\",width:\"100%\",backgroundColor:\"#EEBC1D\",marginTop:20},picture:{width:200,height:200,cursor:\"pointer\",backgroundColor:\"#EEBC1D\",objectFit:\"contain\"},watchlist:{flex:1,width:\"100%\",backgroundColor:\"grey\",borderRadius:10,padding:15,paddingTop:10,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:12,overflowY:\"scroll\"},coin:{padding:10,borderRadius:5,color:\"black\",width:\"100%\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",backgroundColor:\"#EEBC1D\",boxShadow:\"0 0 3px black\"}});export default function UserSideBar(){var classes=useStyles();var _React$useState=React.useState({right:false}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var _CryptoState=CryptoState(),user=_CryptoState.user,setAlert=_CryptoState.setAlert,watchlist=_CryptoState.watchlist,coins=_CryptoState.coins,symbol=_CryptoState.symbol;console.log(watchlist,coins);var toggleDrawer=function toggleDrawer(anchor,open){return function(event){if(event.type===\"keydown\"&&(event.key===\"Tab\"||event.key===\"Shift\")){return;}setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},anchor,open)));};};var logOut=function logOut(){signOut(auth);setAlert({open:true,type:\"success\",message:\"Logout Successfull !\"});toggleDrawer();};var removeFromWatchlist=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(coin){var coinRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:coinRef=doc(db,\"watchlist\",user.uid);_context.prev=1;_context.next=4;return setDoc(coinRef,{coins:watchlist.filter(function(wish){return wish!==(coin===null||coin===void 0?void 0:coin.id);})},{merge:true});case 4:setAlert({open:true,message:\"\".concat(coin.name,\" Removed from the Watchlist !\"),type:\"success\"});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setAlert({open:true,message:_context.t0.message,type:\"error\"});case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function removeFromWatchlist(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:[\"right\"].map(function(anchor){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Avatar,{onClick:toggleDrawer(anchor,true),style:{height:38,width:38,cursor:\"pointer\",backgroundColor:\"#EEBC1D\"},src:user.photoURL,alt:user.displayName||user.email}),/*#__PURE__*/_jsx(Drawer,{anchor:anchor,open:state[anchor],onClose:toggleDrawer(anchor,false),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.picture,src:user.photoURL,alt:user.displayName||user.email}),/*#__PURE__*/_jsx(\"span\",{style:{width:\"100%\",fontSize:25,textAlign:\"center\",fontWeight:\"bolder\",wordWrap:\"break-word\"},children:user.displayName||user.email}),/*#__PURE__*/_jsxs(\"div\",{className:classes.watchlist,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:15,textShadow:\"0 0 5px black\"},children:\"Watchlist\"}),coins.map(function(coin){if(watchlist.includes(coin.id))return/*#__PURE__*/_jsxs(\"div\",{className:classes.coin,children:[/*#__PURE__*/_jsx(\"span\",{children:coin.name}),/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",gap:8},children:[symbol,\" \",numberWithCommas(coin.current_price.toFixed(2)),/*#__PURE__*/_jsx(AiFillDelete,{style:{cursor:\"pointer\"},fontSize:\"16\",onClick:function onClick(){return removeFromWatchlist(coin);}})]})]});else return/*#__PURE__*/_jsx(_Fragment,{});})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,onClick:logOut,children:\"Log Out\"})]})})]},anchor);})});}","map":{"version":3,"names":["React","makeStyles","Drawer","Avatar","Button","CryptoState","signOut","auth","db","AiFillDelete","doc","setDoc","numberWithCommas","useStyles","container","width","padding","height","display","flexDirection","fontFamily","profile","flex","alignItems","gap","logout","backgroundColor","marginTop","picture","cursor","objectFit","watchlist","borderRadius","paddingTop","overflowY","coin","color","justifyContent","boxShadow","UserSideBar","classes","useState","right","state","setState","user","setAlert","coins","symbol","console","log","toggleDrawer","anchor","open","event","type","key","logOut","message","removeFromWatchlist","coinRef","uid","filter","wish","id","merge","name","map","photoURL","displayName","email","fontSize","textAlign","fontWeight","wordWrap","textShadow","includes","current_price","toFixed"],"sources":["C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/src/Components/Authentication/UserSideBar.js"],"sourcesContent":["import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { Avatar, Button } from \"@material-ui/core\";\r\nimport { CryptoState } from \"../../CryptoContext\";\r\nimport { signOut } from \"firebase/auth\";\r\nimport { auth, db } from \"../../firebase\";\r\n\r\nimport { AiFillDelete } from \"react-icons/ai\";\r\nimport { doc, setDoc } from \"firebase/firestore\";\r\nimport { numberWithCommas } from \"../CoinTable\";\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    width: 350,\r\n    padding: 25,\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    fontFamily: \"monospace\",\r\n  },\r\n  profile: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    gap: \"20px\",\r\n    height: \"92%\",\r\n  },\r\n  logout: {\r\n    height: \"8%\",\r\n    width: \"100%\",\r\n    backgroundColor: \"#EEBC1D\",\r\n    marginTop: 20,\r\n  },\r\n  picture: {\r\n    width: 200,\r\n    height: 200,\r\n    cursor: \"pointer\",\r\n    backgroundColor: \"#EEBC1D\",\r\n    objectFit: \"contain\",\r\n  },\r\n  watchlist: {\r\n    flex: 1,\r\n    width: \"100%\",\r\n    backgroundColor: \"grey\",\r\n    borderRadius: 10,\r\n    padding: 15,\r\n    paddingTop: 10,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    gap: 12,\r\n    overflowY: \"scroll\",\r\n  },\r\n  coin: {\r\n    padding: 10,\r\n    borderRadius: 5,\r\n    color: \"black\",\r\n    width: \"100%\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#EEBC1D\",\r\n    boxShadow: \"0 0 3px black\",\r\n  },\r\n});\r\n\r\nexport default function UserSideBar() {\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useState({\r\n    right: false,\r\n  });\r\n  const { user, setAlert, watchlist, coins, symbol } = CryptoState();\r\n\r\n  console.log(watchlist, coins);\r\n\r\n  const toggleDrawer = (anchor, open) => (event) => {\r\n    if (\r\n      event.type === \"keydown\" &&\r\n      (event.key === \"Tab\" || event.key === \"Shift\")\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    setState({ ...state, [anchor]: open });\r\n  };\r\n\r\n  const logOut = () => {\r\n    signOut(auth);\r\n    setAlert({\r\n      open: true,\r\n      type: \"success\",\r\n      message: \"Logout Successfull !\",\r\n    });\r\n\r\n    toggleDrawer();\r\n  };\r\n\r\n  const removeFromWatchlist = async (coin) => {\r\n    const coinRef = doc(db, \"watchlist\", user.uid);\r\n    try {\r\n      await setDoc(\r\n        coinRef,\r\n        { coins: watchlist.filter((wish) => wish !== coin?.id) },\r\n        { merge: true }\r\n      );\r\n\r\n      setAlert({\r\n        open: true,\r\n        message: `${coin.name} Removed from the Watchlist !`,\r\n        type: \"success\",\r\n      });\r\n    } catch (error) {\r\n      setAlert({\r\n        open: true,\r\n        message: error.message,\r\n        type: \"error\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {[\"right\"].map((anchor) => (\r\n        <React.Fragment key={anchor}>\r\n          <Avatar\r\n            onClick={toggleDrawer(anchor, true)}\r\n            style={{\r\n              height: 38,\r\n              width: 38,\r\n              cursor: \"pointer\",\r\n              backgroundColor: \"#EEBC1D\",\r\n            }}\r\n            src={user.photoURL}\r\n            alt={user.displayName || user.email}\r\n          />\r\n          <Drawer\r\n            anchor={anchor}\r\n            open={state[anchor]}\r\n            onClose={toggleDrawer(anchor, false)}\r\n          >\r\n            <div className={classes.container}>\r\n              <div className={classes.profile}>\r\n                <Avatar\r\n                  className={classes.picture}\r\n                  src={user.photoURL}\r\n                  alt={user.displayName || user.email}\r\n                />\r\n                <span\r\n                  style={{\r\n                    width: \"100%\",\r\n                    fontSize: 25,\r\n                    textAlign: \"center\",\r\n                    fontWeight: \"bolder\",\r\n                    wordWrap: \"break-word\",\r\n                  }}\r\n                >\r\n                  {user.displayName || user.email}\r\n                </span>\r\n                <div className={classes.watchlist}>\r\n                  <span style={{ fontSize: 15, textShadow: \"0 0 5px black\" }}>\r\n                    Watchlist\r\n                  </span>\r\n                  {coins.map((coin) => {\r\n                    if (watchlist.includes(coin.id))\r\n                      return (\r\n                        <div className={classes.coin}>\r\n                          <span>{coin.name}</span>\r\n                          <span style={{ display: \"flex\", gap: 8 }}>\r\n                            {symbol}{\" \"}\r\n                            {numberWithCommas(coin.current_price.toFixed(2))}\r\n                            <AiFillDelete\r\n                              style={{ cursor: \"pointer\" }}\r\n                              fontSize=\"16\"\r\n                              onClick={() => removeFromWatchlist(coin)}\r\n                            />\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    else return <></>;\r\n                  })}\r\n                </div>\r\n              </div>\r\n              <Button\r\n                variant=\"contained\"\r\n                className={classes.logout}\r\n                onClick={logOut}\r\n              >\r\n                Log Out\r\n              </Button>\r\n            </div>\r\n          </Drawer>\r\n        </React.Fragment>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}