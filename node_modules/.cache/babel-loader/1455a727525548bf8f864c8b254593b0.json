{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import{onAuthStateChanged}from'firebase/auth';import{doc,onSnapshot}from'firebase/firestore';import React,{createContext,useContext,useEffect,useState}from'react';import{CoinList}from'./config/api';import{auth,db}from'./firebase';import{jsx as _jsx}from\"react/jsx-runtime\";var Crypto=/*#__PURE__*/createContext();var CryptoContext=function CryptoContext(_ref){var children=_ref.children;var _useState=useState(\"INR\"),_useState2=_slicedToArray(_useState,2),currency=_useState2[0],setCurrency=_useState2[1];var _useState3=useState(\"₹\"),_useState4=_slicedToArray(_useState3,2),symbol=_useState4[0],setSymbol=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),coins=_useState6[0],setCoins=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var _useState11=useState({open:false,message:\"\",type:\"success\"}),_useState12=_slicedToArray(_useState11,2),alert=_useState12[0],setAlert=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),watchlist=_useState14[0],setWatchList=_useState14[1];useEffect(function(){if(user){var coinRef=doc(db,\"watchlist\",user.uid);var unsubscribe=onSnapshot(coinRef,function(coin){if(coin.exists()){setWatchList(coin.data().coins);}else{console.log(\"No Items in WatchList\");}});return function(){unsubscribe();};}},[user]);useEffect(function(){onAuthStateChanged(auth,function(user){if(user)setUser(user);else setUser(null);});},[]);var fetchCoins=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return axios.get(CoinList(currency));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;console.log(data);setCoins(data);setLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchCoins(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(currency===\"INR\")setSymbol(\"₹\");else if(currency===\"USD\")setSymbol(\"$\");},[currency]);return/*#__PURE__*/_jsx(Crypto.Provider,{value:{currency:currency,symbol:symbol,setCurrency:setCurrency,coins:coins,loading:loading,fetchCoins:fetchCoins,alert:alert,setAlert:setAlert,user:user,watchlist:watchlist},children:children});};export default CryptoContext;export var CryptoState=function CryptoState(){return useContext(Crypto);};","map":{"version":3,"names":["axios","onAuthStateChanged","doc","onSnapshot","React","createContext","useContext","useEffect","useState","CoinList","auth","db","Crypto","CryptoContext","children","currency","setCurrency","symbol","setSymbol","coins","setCoins","loading","setLoading","user","setUser","open","message","type","alert","setAlert","watchlist","setWatchList","coinRef","uid","unsubscribe","coin","exists","data","console","log","fetchCoins","get","CryptoState"],"sources":["C:/Users/abhis/Documents/WebDev/CryptoPedia/crypto-pedia/src/CryptoContext.js"],"sourcesContent":["import axios from 'axios';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { doc, onSnapshot } from 'firebase/firestore';\r\nimport React, { createContext, useContext, useEffect, useState } from 'react'\r\nimport { CoinList } from './config/api';\r\nimport { auth, db } from './firebase';\r\n\r\nconst Crypto = createContext();\r\n\r\nconst CryptoContext = ({children}) => {\r\n \r\n    const [currency, setCurrency] = useState(\"INR\");\r\n    const [symbol, setSymbol] = useState(\"₹\");\r\n    const [coins, setCoins] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [user, setUser] = useState(null);\r\n    const [alert, setAlert] = useState({\r\n        open: false,\r\n        message: \"\",\r\n        type: \"success\",\r\n    });\r\n\r\n    const [watchlist, setWatchList] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if(user) {\r\n            const coinRef = doc(db, \"watchlist\", user.uid);\r\n\r\n           var unsubscribe = onSnapshot(coinRef, coin => {\r\n                if(coin.exists()) {\r\n                    setWatchList(coin.data().coins);\r\n                }\r\n                else {\r\n                    console.log(\"No Items in WatchList\");\r\n                }\r\n            });\r\n            return () => {\r\n                unsubscribe();\r\n        }\r\n        }\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        onAuthStateChanged(auth, (user) => {\r\n            if(user) setUser(user);\r\n            else setUser(null);\r\n        })\r\n    },[]);\r\n\r\n    const fetchCoins = async () => {\r\n        setLoading(true);\r\n        const { data } = await axios.get(CoinList(currency));\r\n        console.log(data);\r\n    \r\n        setCoins(data);\r\n        setLoading(false);\r\n      };\r\n\r\n    useEffect(() => {\r\n        if(currency === \"INR\") setSymbol(\"₹\");\r\n        else if(currency === \"USD\") setSymbol(\"$\");\r\n    },[currency]);\r\n\r\nreturn (\r\n    <Crypto.Provider value={{currency, symbol, setCurrency, coins, loading, fetchCoins, alert, setAlert, user, watchlist}}>\r\n        {children}\r\n    </Crypto.Provider>\r\n  )\r\n}\r\n\r\nexport default CryptoContext;\r\n\r\nexport const CryptoState = () => {\r\n    return useContext(Crypto);\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}